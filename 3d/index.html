<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dambreak benchmark case &mdash; air-water-vv 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/bootswatch-3.2.0/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../static/bootstrap-sphinx.js"></script>
    <link rel="top" title="air-water-vv 0.1.1 documentation" href="../index.html" />
    <link rel="prev" title="Broad crested weir benchmark case" href="../2d/index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          air-water-vv</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html">Broad crested weir benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#dambreak-collagrosi-benchmark-case">Dambreak Collagrosi benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#submerged-breakwater-on-slope-benchmark-case">Submerged breakwater on slope  benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#sine-wave-sloshing-benchmark-case">Sine wave sloshing benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#crump-weir-benchmark-case">Crump weir benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#dambreak-ubbink-benchmark-case">Dambreak Ubbink benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#sharp-crested-weir-benchmark-case">Sharp crested weir benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#vertical-breakwater-benchmark-case">Vertical Breakwater benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#dambreak-benchmark-case">Dambreak benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2d/index.html#sluice-gate-benchmark-case">Sluice gate benchmark case</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Dambreak benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="#dambreak-gomez-benchmark-case">Dambreak Gomez benchmark case</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Dambreak benchmark case</a><ul>
<li><a class="reference internal" href="#preprocessing">Preprocessing</a></li>
<li><a class="reference internal" href="#running">Running</a></li>
<li><a class="reference internal" href="#postprocessing">Postprocessing</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dambreak-gomez-benchmark-case">Dambreak Gomez benchmark case</a><ul>
<li><a class="reference internal" href="#id1">References</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../2d/index.html" title="Previous Chapter: Broad crested weir benchmark case"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Broad crested we...</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../sources/3d/index.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="dambreak-benchmark-case">
<h1>Dambreak benchmark case<a class="headerlink" href="#dambreak-benchmark-case" title="Permalink to this headline">¶</a></h1>
<p>The problem consists of a 0.146m x 0.146m x 0.292m column of water, initially at rest, that collapses under
the action of gravity and impacts a stationary object. The computational domain is a rectangular box with
dimensions 0.584m x 0.146m x 0.350m. The top of the domain is left open. For more details, see runfiles or references.</p>
<div class="section" id="preprocessing">
<h2>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h2>
<p>No postprocessing is necessary for running this case.
The first lines of dambreak.py the discretion and formulation can be chosen by modifying the following lines.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Refinement = 2</td>
<td>Controls the global level or refinement  e.g. 5 ==&gt; 32x16x16</td>
</tr>
<tr class="row-odd"><td>spaceOrder = 1 / 2</td>
<td>Choose linear or quadratic elements</td>
</tr>
<tr class="row-even"><td>useHex     = True / False</td>
<td>Choose hexahedral or tetrahedral elements</td>
</tr>
<tr class="row-odd"><td>useRBLES   = 0.0 / 1.0</td>
<td>Choose SUPG  (0.0) or RBLES/VMS (1.0) for stabilizing the Navier-Stokes equations</td>
</tr>
<tr class="row-even"><td>useMetrics = 0.0 / 1.0</td>
<td>Choose h-based (0.0) or metric based (1.0) numerical parameters</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>The benchmark can be run using the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mpirun</span> <span class="o">-</span><span class="n">n</span> <span class="c">#NP parun dambreak_so.py -l 3 -v -O petsc.options -D lin_tet_3</span>
</pre></div>
</div>
<p>where #NP stand for the number of processors. The final argument, which specifies the output directory, is optional.
Or use one of the run.#HOST.pbs run files.</p>
</div>
<div class="section" id="postprocessing">
<h2>Postprocessing<a class="headerlink" href="#postprocessing" title="Permalink to this headline">¶</a></h2>
<p>For extracting column heights and width a separate pvpython scripts are
supplied in $PROTEUS_MPRANS/scripts. To be able to run the scripts pvpython needs to be installed. This is a special
python shipped with paraview. Furthermore, the scripts assumed there is one master xmf file.  This master xmf file
can be generated by running the following command in the directory containing the xmf/h5 solution files.</p>
<div class="highlight-python"><pre>$PROTEUS/proteusModule/scripts/gatherArchives.py -s #NP -f dambreak_p</pre>
</div>
<p>This will generate a file dambreak_p_all#NP.xmf which can be used for extracting column heights and width by running
the following commands in the directory containing the xmf/h5 solution files.</p>
<div class="highlight-python"><pre>$PROTEUS_MPRANS/scripts/dambreakExtractHeightAndWidth.py -f dambreak_p_all#NP.xmf</pre>
</div>
<p>This will produce the file height.txt that contain the height and width time series.
The experimental data is provided by the file sakamoto_exp.dat</p>
<p>For visualizing purposes it might be beneficial to repackage the xmf/h5 solution files.
There are three distinct reasons/benefits to do this:</p>
<ol class="arabic simple">
<li>The script allows skipping time steps and only extracts variable deemed important,
thereby greatly reducing the file size and hence the time to copy data form remote location.</li>
<li>In the resulting solution files every time step has a distinct solution file,
which allows visualization of results while the simulation is still running.</li>
<li>The scripts also outputs VTK files which allows visualization with VisIt (and others).</li>
</ol>
<p>Repackaging of the solution can be done by running the following commands in the directory containing the xmf/h5 solution files.</p>
<div class="highlight-python"><pre>$PROTEUS_MPRANS/scripts/extractSolution.py -f ../dambreak_p -s #start -e #end -i #incr -n #NP</pre>
</div>
<p>where #start end #end are the begin and end timestep number and #incr is a increment time step (aka stride) and #NP is again the number of processors.</p>
<p>For convenience all the postprocesing mentioned above are lumped in a simple script. This script can be run using
following commands in the directory containing the xmf/h5 solution files.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">postpro</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">S.Koshizuka, H. Tamako, Y. Oka</p>
<blockquote>
<div><p>&#8220;A particle method for incompressible viscous flow with fluid fragmentation&#8221;
Computational Fluid Mechanics Journal, 113 (1995) 134-147</p>
</div></blockquote>
</li>
<li><p class="first">R.Elias, A. Coutinho</p>
<blockquote>
<div><p>&#8220;Stabilized edge-based finite element simulation of free-surface flows&#8221;
International Journal of Numerical Methods in Fluids 54 (2007) 965-993</p>
</div></blockquote>
</li>
<li><p class="first">C.E. Kees, I. Akkerman, M. W. Farthing and Y. Bazilevs</p>
<blockquote>
<div><p>&#8220;A Conservative Level Set Method for Variable-Order Approximations and Unstructured Meshes&#8221;
Journal of Computational Physics, 230-12(2011) 3402-3414,  doi:10.1016/j.jcp.2011.02.030</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="dambreak-gomez-benchmark-case">
<h1>Dambreak Gomez benchmark case<a class="headerlink" href="#dambreak-gomez-benchmark-case" title="Permalink to this headline">¶</a></h1>
<p>The problem consists of a 0.4m  x 0.3m x 0.61 (dx x dz x dy) column of water, initially at rest.
Under the action of gravity, the water column interacts with an obstacle and collapses to a wall.
The computational domain is a 3D rectangular box with  dimensions 1.6m long x 0.61m x 0.75m high.
The obstacle has dimensions 0.12m x 0.12m, it is placed on the tank&#8217; s bottom and reaches the top of the doamin.
The top of the domain is left open, when the rest of the boundary patches act as no slio walls.
In the following figure, a sketch of the dambreak initial conditions is shown.</p>
<div class="figure">
<img alt="../images/dambreakGomez.JPG" src="../images/dambreakGomez.JPG" />
</div>
<p>This case tests the ability of PROTEUS to simulate the free-surface evolution and forces / pressures on structures. The results of the simulations can be compared with the data in the following references.
For more details, see runfiles or references.</p>
<div class="section" id="id1">
<h2>References<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Gómez-Gesteira, M. and R.A. Dalrymple, &#8220;Using a 3D SPH Method for Wave Impact on a Tall Structure, J. Waterway, Port, Coastal, Ocean Engineering, 130(2), 63-69, 2004.</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, air-water-vv developers.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>